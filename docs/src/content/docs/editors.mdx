---
title: Editores de CÃ³digo
description: GuÃ­a completa para gestionar VS Code, Cursor y AntiGravity en Hydenix con Nix y dotfiles.
---

# Editores de CÃ³digo en Hydenix

Esta guÃ­a explica cÃ³mo gestionar **VS Code**, **Cursor** y **AntiGravity** en tu configuraciÃ³n de Hydenix usando Nix y dotfiles. Todos los editores estÃ¡n configurados de forma declarativa y sus configuraciones se gestionan mediante symlinks para permitir ediciÃ³n inmediata sin rebuild.

## ðŸ“‹ Tabla de Contenidos

- [Arquitectura](#arquitectura)
- [Estructura de Archivos](#estructura-de-archivos)
- [ConfiguraciÃ³n Actual](#configuraciÃ³n-actual)
- [Editar Configuraciones](#editar-configuraciones)
- [Agregar Extensiones](#agregar-extensiones)
- [Mantenimiento](#mantenimiento)
- [Troubleshooting](#troubleshooting)
- [Flujo de Trabajo Recomendado](#flujo-de-trabajo-recomendado)

---

## ðŸ—ï¸ Arquitectura

### CÃ³mo Funciona

Los editores en Hydenix siguen un patrÃ³n de **archivos mutables** gestionados por symlinks:

1. **Configuraciones en el repositorio**: Los archivos `settings.json` y `keybindings.json` viven en `~/Dotfiles/resources/config/`
2. **Symlinks automÃ¡ticos**: Home Manager crea symlinks desde `~/.config/[Editor]/User/` hacia los archivos del repositorio
3. **EdiciÃ³n inmediata**: Al editar los archivos en el repo, los cambios se reflejan instantÃ¡neamente (solo recargar ventana)
4. **Sin rebuild**: No necesitas ejecutar `make switch` para cambios en configuraciones

### Ventajas de este Enfoque

âœ… **Control total**: Todo versionado en git  
âœ… **Cambios inmediatos**: Sin rebuild para settings  
âœ… **Reproducible**: Misma configuraciÃ³n en todas las mÃ¡quinas  
âœ… **Sin Settings Sync**: No dependes de servicios externos  
âœ… **Extensible**: FÃ¡cil agregar nuevos editores

---

## ðŸ“ Estructura de Archivos

```
Dotfiles/
â”œâ”€â”€ resources/
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ vscode/
â”‚       â”‚   â”œâ”€â”€ settings.json          # ConfiguraciÃ³n VS Code
â”‚       â”‚   â””â”€â”€ keybindings.json        # Keybindings VS Code
â”‚       â”œâ”€â”€ cursor/
â”‚       â”‚   â”œâ”€â”€ settings.json          # ConfiguraciÃ³n Cursor
â”‚       â”‚   â””â”€â”€ keybindings.json        # Keybindings Cursor
â”‚       â””â”€â”€ antigravity/
â”‚           â”œâ”€â”€ settings.json          # ConfiguraciÃ³n AntiGravity
â”‚           â””â”€â”€ keybindings.json       # Keybindings AntiGravity
â””â”€â”€ modules/
    â””â”€â”€ hm/
        â”œâ”€â”€ files.nix                   # Symlinks de configuraciÃ³n
        â””â”€â”€ programs/
            â””â”€â”€ editors/
                â”œâ”€â”€ default.nix        # Importador de editores
                â”œâ”€â”€ vscode.nix         # MÃ³dulo VS Code (instalaciÃ³n + extensiones)
                â”œâ”€â”€ cursor.nix         # MÃ³dulo Cursor (instalaciÃ³n)
                â””â”€â”€ antigravity.nix    # MÃ³dulo AntiGravity (instalaciÃ³n)
```

### Ubicaciones de InstalaciÃ³n

| Editor | MÃ©todo de InstalaciÃ³n | UbicaciÃ³n |
|--------|----------------------|-----------|
| VS Code | `programs.vscode` (Home Manager) | `modules/hm/programs/editors/vscode.nix` |
| Cursor | `home.packages` | `modules/hm/programs/editors/cursor.nix` |
| AntiGravity | `home.packages` | `modules/hm/programs/editors/antigravity.nix` |

### Ubicaciones de Symlinks

| Editor | ConfiguraciÃ³n | Symlink |
|--------|--------------|---------|
| VS Code | `settings.json` | `~/.config/Code/User/settings.json` â†’ `~/Dotfiles/resources/config/vscode/settings.json` |
| VS Code | `keybindings.json` | `~/.config/Code/User/keybindings.json` â†’ `~/Dotfiles/resources/config/vscode/keybindings.json` |
| Cursor | `settings.json` | `~/.config/Cursor/User/settings.json` â†’ `~/Dotfiles/resources/config/cursor/settings.json` |
| Cursor | `keybindings.json` | `~/.config/Cursor/User/keybindings.json` â†’ `~/Dotfiles/resources/config/cursor/keybindings.json` |
| AntiGravity | `settings.json` | `~/.config/Antigravity/User/settings.json` â†’ `~/Dotfiles/resources/config/antigravity/settings.json` |
| AntiGravity | `keybindings.json` | `~/.config/Antigravity/User/keybindings.json` â†’ `~/Dotfiles/resources/config/antigravity/keybindings.json` |

---

## âš™ï¸ InstalaciÃ³n y ConfiguraciÃ³n

### VS Code

**InstalaciÃ³n**: Gestionado por Home Manager mediante `programs.vscode`

**UbicaciÃ³n del mÃ³dulo**: `modules/hm/programs/editors/vscode.nix`

```nix
{
  programs.vscode = {
    enable = true;
    package = pkgs.vscode.fhs;  # VersiÃ³n FHS para mejor compatibilidad
    mutableExtensionsDir = true;  # Permite instalar extensiones manualmente
    profiles.default = {
      extensions = [ ];  # Extensiones declarativas (vacÃ­o por ahora)
    };
  };
}
```

**CaracterÃ­sticas**:
- âœ… Instalado declarativamente por Nix
- âœ… Settings Sync desactivado
- âœ… Tema Wallbash (desde Hydenix)
- âœ… Iconos Flow Icons
- âœ… Terminal externa: ghostty
- âœ… TelemetrÃ­a desactivada

### Cursor

**InstalaciÃ³n**: Instalado como paquete en `modules/hm/programs/editors/cursor.nix`

**UbicaciÃ³n de instalaciÃ³n**: `modules/hm/programs/editors/cursor.nix`

```nix
{
  home.packages = with pkgs; [
    code-cursor-fhs  # Cursor AI (versiÃ³n FHS para mejor compatibilidad)
    cursor-cli        # Cursor CLI
  ];
}
```

**CaracterÃ­sticas**:
- âœ… Instalado desde `modules/hm/programs/editors/cursor.nix`
- âœ… Settings Sync desactivado
- âœ… Tema: Cursor Dark Midnight
- âœ… Terminal externa: ghostty
- âœ… IA habilitada (AutoCompletion y Chat)
- âœ… Ctrl+I para Composer Mode

### AntiGravity

**InstalaciÃ³n**: Instalado como paquete en `modules/hm/programs/editors/antigravity.nix`

**UbicaciÃ³n de instalaciÃ³n**: `modules/hm/programs/editors/antigravity.nix`

```nix
{
  home.packages = with pkgs; [
    antigravity-fhs  # AntiGravity by Google (versiÃ³n FHS)
  ];
}
```

**CaracterÃ­sticas**:
- âœ… Instalado desde `modules/hm/programs/editors/antigravity.nix`
- âœ… Settings Sync desactivado
- âœ… Tema: Tokyo Night
- âœ… Terminal externa: ghostty
- âœ… ConfiguraciÃ³n mÃ­nima funcional

### Nota sobre InstalaciÃ³n

**VS Code** se instala mediante el mÃ³dulo `programs.vscode` de Home Manager, lo que permite gestiÃ³n declarativa de extensiones y configuraciÃ³n avanzada.

**Cursor y AntiGravity** se instalan como paquetes en `home.packages` dentro de sus respectivos mÃ³dulos en `modules/hm/programs/editors/`. Esto significa que:
- Se instalan automÃ¡ticamente con `make switch`
- Todos los editores estÃ¡n organizados en un solo lugar (`editors/`)
- No tienen gestiÃ³n declarativa de extensiones (se instalan manualmente desde la UI)
- La configuraciÃ³n se gestiona mediante symlinks en `files.nix`

---

## âœï¸ Editar Configuraciones

### MÃ©todo RÃ¡pido (Recomendado)

Los cambios en `settings.json` y `keybindings.json` son **inmediatos** sin rebuild:

```bash
# 1. Editar configuraciÃ³n
nvim ~/Dotfiles/resources/config/vscode/settings.json
# o
nvim ~/Dotfiles/resources/config/cursor/settings.json
# o
nvim ~/Dotfiles/resources/config/antigravity/settings.json

# 2. Recargar ventana en el editor
# Ctrl+Shift+P > "Reload Window"

# 3. (Opcional) Commitear cambios
cd ~/Dotfiles
git add resources/config/vscode/
git commit -m "feat(vscode): update settings"
git push
```

### Ejemplo: Cambiar TamaÃ±o de Fuente

```json
// En ~/Dotfiles/resources/config/vscode/settings.json
{
  "editor.fontSize": 16,  // Cambiar de 14 a 16
  // ... resto de configuraciÃ³n
}
```

**Resultado**: El cambio se aplica inmediatamente al recargar la ventana.

### Verificar Symlinks

```bash
# Verificar que los symlinks estÃ¡n activos
ls -la ~/.config/Code/User/
ls -la ~/.config/Cursor/User/
ls -la ~/.config/Antigravity/User/

# Verificar destino de symlinks
readlink -f ~/.config/Code/User/settings.json
# Debe mostrar: /home/ludus/Dotfiles/resources/config/vscode/settings.json
```

---

## ðŸ”Œ Agregar Extensiones

### VS Code: MÃ©todo 1 - InstalaciÃ³n Manual (Recomendado)

**Paso 1**: Instalar desde la UI de VS Code
- Abrir VS Code
- `Ctrl+Shift+X` (Extensions)
- Buscar extensiÃ³n
- Instalar

**Paso 2**: (Opcional) Declarar en `vscode.nix` para reproducibilidad

```bash
# Ver extensiones instaladas
code --list-extensions --show-versions
```

### VS Code: MÃ©todo 2 - Declarativo (Para Extensiones CrÃ­ticas)

#### Buscar ExtensiÃ³n en nixpkgs

```bash
# Buscar extensiÃ³n disponible en nixpkgs
nix search nixpkgs vscode-extensions | grep python
```

#### Si Existe en nixpkgs

Editar `modules/hm/programs/editors/vscode.nix`:

```nix
{
  programs.vscode = {
    enable = true;
    package = pkgs.vscode.fhs;
    mutableExtensionsDir = true;
    profiles.default = {
      extensions = with pkgs.vscode-extensions; [
        ms-python.python          # Python
        vscodevim.vim             # Vim
        jnoortheen.nix-ide        # Nix IDE
        # Agregar mÃ¡s extensiones aquÃ­
      ];
    };
  };
}
```

**Aplicar cambios**:
```bash
cd ~/Dotfiles
make switch
```

#### Si NO Existe en nixpkgs

Agregar desde marketplace usando `extensionsFromVscodeMarketplace`:

```nix
profiles.default = {
  extensions = [ ] ++ pkgs.vscode-utils.extensionsFromVscodeMarketplace [
    {
      name = "nombre-extension";
      publisher = "nombre-publisher";
      version = "x.y.z";
      sha256 = "hash-aqui";
    }
  ];
};
```

**Obtener informaciÃ³n de extensiÃ³n**:
1. URL del marketplace: `https://marketplace.visualstudio.com/items?itemName=publisher.nombre`
2. DespuÃ©s de instalar manualmente: `code --list-extensions --show-versions | grep nombre`

### Cursor y AntiGravity: InstalaciÃ³n Manual

Cursor y AntiGravity no tienen soporte declarativo de extensiones en Nix actualmente. Instala extensiones desde la UI:

**Cursor**:
- `Ctrl+Shift+X` > Buscar > Instalar

**AntiGravity**:
- `Ctrl+Shift+X` > Buscar > Instalar

---

## ðŸ”§ Mantenimiento

### Actualizar Configuraciones

```bash
# 1. Editar archivos de configuraciÃ³n
nvim ~/Dotfiles/resources/config/vscode/settings.json

# 2. Validar JSON
python3 -m json.tool ~/Dotfiles/resources/config/vscode/settings.json

# 3. Recargar editor (Ctrl+Shift+P > "Reload Window")

# 4. Commitear
cd ~/Dotfiles
git add resources/config/vscode/
git commit -m "feat(vscode): update configuration"
git push
```

### Sincronizar Entre MÃ¡quinas

```bash
# En mÃ¡quina nueva
cd ~/Dotfiles
git pull
make switch  # Aplica symlinks y configuraciÃ³n
```

### Backup de ConfiguraciÃ³n Actual

```bash
# Backup antes de cambios importantes
cp ~/.config/Code/User/settings.json \
   ~/.config/Code/User/settings.json.backup-$(date +%Y%m%d-%H%M%S)
```

### Verificar Estado del Sistema

```bash
# Verificar symlinks
ls -la ~/.config/Code/User/
ls -la ~/.config/Cursor/User/
ls -la ~/.config/Antigravity/User/

# Verificar extensiÃ³n Wallbash (VS Code)
ls -la ~/.vscode/extensions/ | grep wallbash

# Verificar configuraciÃ³n de terminal
grep "terminal.external" ~/Dotfiles/resources/config/*/settings.json
```

---

## ðŸ› Troubleshooting

### Problema: Cambios en settings.json no se aplican

**DiagnÃ³stico**:
```bash
# Verificar que es symlink
readlink -f ~/.config/Code/User/settings.json

# Debe mostrar: /home/ludus/Dotfiles/resources/config/vscode/settings.json
```

**SoluciÃ³n**:
```bash
# Si no es symlink, recrear
rm ~/.config/Code/User/settings.json
cd ~/Dotfiles
make switch
```

### Problema: Settings Sync sigue activo

**SÃ­ntoma**: El editor pregunta sobre sincronizaciÃ³n al iniciar

**SoluciÃ³n**:
```bash
# Verificar settings.json
grep "settingsSync" ~/Dotfiles/resources/config/vscode/settings.json

# Debe contener:
# "settingsSync.keybindingsPerPlatform": false

# Si no estÃ¡, agregarlo y recargar ventana
```

### Problema: Error de sintaxis JSON

**DiagnÃ³stico**:
```bash
# Validar JSON
python3 -m json.tool ~/Dotfiles/resources/config/vscode/settings.json
```

**SoluciÃ³n**:
- Corregir errores de sintaxis (comas faltantes, llaves no cerradas, etc.)
- Eliminar comentarios `//` o `##` (JSON no soporta comentarios nativamente)
- Usar un editor con validaciÃ³n JSON

### Problema: ExtensiÃ³n Wallbash no funciona

**DiagnÃ³stico**:
```bash
# Verificar que existe
ls -la ~/.vscode/extensions/ | grep wallbash
```

**SoluciÃ³n**:
```bash
# Si no existe, verificar pkgs.hyde
nix-shell -p hyde --run "ls -la \$out/share/vscode/extensions/"

# Recrear symlink
cd ~/Dotfiles
make switch
```

### Problema: Terminal externa no funciona

**Verificar configuraciÃ³n**:
```bash
# Ver quÃ© terminal estÃ¡ configurada
grep "terminal.external" ~/Dotfiles/resources/config/*/settings.json

# Debe mostrar: "terminal.external.linuxExec": "ghostty"
```

**Verificar que ghostty estÃ¡ instalado**:
```bash
which ghostty
# Debe mostrar: /etc/profiles/per-user/ludus/bin/ghostty
```

**SoluciÃ³n**: Si ghostty no estÃ¡ instalado, agregarlo a tu configuraciÃ³n de Home Manager.

### Problema: Warning de deprecaciÃ³n en VS Code

**SÃ­ntoma**: Warning sobre `programs.vscode.extensions` renombrado

**SoluciÃ³n**: Ya estÃ¡ corregido usando `profiles.default.extensions`. Si ves el warning, verifica que `vscode.nix` use la nueva sintaxis:

```nix
profiles.default = {
  extensions = [ ];
};
```

---

## ðŸ”„ Flujo de Trabajo Recomendado

### Agregar Nueva ConfiguraciÃ³n

1. **Editar en el repositorio**:
   ```bash
   nvim ~/Dotfiles/resources/config/vscode/settings.json
   ```

2. **Validar JSON**:
   ```bash
   python3 -m json.tool ~/Dotfiles/resources/config/vscode/settings.json
   ```

3. **Recargar editor**: `Ctrl+Shift+P` > "Reload Window"

4. **Probar configuraciÃ³n**: Verificar que funciona como esperado

5. **Commitear**:
   ```bash
   cd ~/Dotfiles
   git add resources/config/vscode/
   git commit -m "feat(vscode): add new setting"
   git push
   ```

### Agregar Nueva ExtensiÃ³n (VS Code)

1. **Instalar manualmente** desde la UI de VS Code

2. **Probar extensiÃ³n**: Verificar que funciona correctamente

3. **(Opcional) Declarar en `vscode.nix`**:
   ```bash
   # Buscar en nixpkgs
   nix search nixpkgs vscode-extensions | grep nombre-extension
   
   # Si existe, agregar a vscode.nix
   nvim ~/Dotfiles/modules/hm/programs/editors/vscode.nix
   
   # Aplicar
   cd ~/Dotfiles
   make switch
   ```

### Sincronizar a Nueva MÃ¡quina

1. **Clonar repositorio**:
   ```bash
   git clone <repo-url> ~/Dotfiles
   ```

2. **Aplicar configuraciÃ³n**:
   ```bash
   cd ~/Dotfiles
   make switch
   ```

3. **Verificar symlinks**:
   ```bash
   ls -la ~/.config/Code/User/
   ```

4. **Instalar extensiones manuales** (si las necesitas)

---

## ðŸ“š Referencias y Recursos

### DocumentaciÃ³n Oficial

- **VS Code Settings**: https://code.visualstudio.com/docs/getstarted/settings
- **Home Manager VSCode**: https://nix-community.github.io/home-manager/options.xhtml#opt-programs.vscode.enable
- **Cursor Docs**: https://docs.cursor.sh
- **Nix Packages Search**: https://search.nixos.org/packages

### Comandos Ãštiles

```bash
# Listar extensiones instaladas (VS Code)
code --list-extensions --show-versions

# Buscar extensiÃ³n en nixpkgs
nix search nixpkgs vscode-extensions | grep nombre

# Validar JSON
python3 -m json.tool archivo.json

# Verificar symlinks
readlink -f ~/.config/Code/User/settings.json

# Aplicar cambios
cd ~/Dotfiles && make switch

# Verificar sintaxis Nix
nix-instantiate --parse --expr 'import ./modules/hm/programs/editors/vscode.nix'
```

---

## ðŸŽ¯ Resumen de Buenas PrÃ¡cticas

1. âœ… **Edita siempre en el repositorio**: `~/Dotfiles/resources/config/`
2. âœ… **Valida JSON** antes de commitear
3. âœ… **Recarga ventana** despuÃ©s de cambios (Ctrl+Shift+P > "Reload Window")
4. âœ… **Commitear cambios** regularmente
5. âœ… **Usar extensiones declarativas** para extensiones crÃ­ticas
6. âœ… **Documentar configuraciones** personalizadas en comentarios
7. âœ… **Hacer backup** antes de cambios importantes
8. âœ… **Verificar symlinks** si algo no funciona

---

**Ãšltima actualizaciÃ³n**: 2026-01-23  
**Mantenido por**: Roberto Flores [https://github.com/25ASAB015](https://github.com/25ASAB015)

