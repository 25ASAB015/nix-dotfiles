---
title: Browsers
description: Configuraci칩n de navegadores web instalados en el sistema
---

# 游깷 Browsers

Este sistema incluye m칰ltiples navegadores web configurados. La configuraci칩n se encuentra en:
```
modules/hm/programs/browsers/
```

## Navegadores instalados

El sistema incluye los siguientes navegadores:

1. **Zen Browser** - Navegador principal (fork de Firefox)
2. **Helium** - Navegador flotante basado en Chromium
3. **Google Chrome** - Navegador est치ndar de Google

Todos los navegadores se importan desde `modules/hm/programs/browsers/default.nix`.

## Zen Browser

### Configuraci칩n

La configuraci칩n de Zen Browser se encuentra en:
```
modules/hm/programs/browsers/zen.nix
```

### Extensiones

Las extensiones se configuran en la secci칩n `ExtensionSettings` dentro de `policies`. Actualmente est치n instaladas:

- **uBlock Origin** - Bloqueador de anuncios
- **1Password X** - Gestor de contrase침as

#### Agregar una nueva extensi칩n

Para agregar una extensi칩n:

1. Obt칠n el ID de la extensi칩n desde [addons.mozilla.org](https://addons.mozilla.org)
   - Puede estar en formato `"ID@author"` o `"{UUID}"`
2. Usa la URL de descarga directa del .xpi:
   ```
   https://addons.mozilla.org/firefox/downloads/latest/[extension-slug]/latest.xpi
   ```
3. Agrega una entrada en `ExtensionSettings`:

```nix
ExtensionSettings = {
  "EXTENSION_ID" = {
    install_url = "https://addons.mozilla.org/firefox/downloads/latest/extension-slug/latest.xpi";
    installation_mode = "force_installed";
  };
};
```

**Ejemplo real:**
```nix
# 1Password X - Password Manager
"{d633138d-6c8b-4493-84d1-909800a9d5b5}" = {
  install_url = "https://addons.mozilla.org/firefox/downloads/latest/1password-x-password-manager/latest.xpi";
  installation_mode = "force_installed";
};
```

### Settings/Preferencias

Los settings personalizados se configuran en la secci칩n `extraPrefs` usando sintaxis `user.js`.

#### Settings actualmente configurados

- **DRM Content**: Habilitado (`media.eme.enabled = true`)
- **Scrollbars siempre visibles**: Deshabilitado overlay scrollbars (`widget.gtk.overlay-scrollbars.enabled = false`)
- **Picture-in-Picture**: Habilitado con controles (`media.videocontrols.picture-in-picture.enabled = true`)
- **Mantener reproducci칩n en PiP**: Al cambiar pesta침as (`media.videocontrols.picture-in-picture.keep-playing-when-switching-tabs = true`)

#### Agregar un nuevo setting

Agrega l칤neas en `extraPrefs` con el formato:

```nix
extraPrefs = ''
  user_pref("preference.name", value);
'';
```

**Ejemplos comunes:**
```nix
# Cambiar p치gina de inicio
user_pref("browser.startup.homepage", "about:blank");

# Deshabilitar sugerencias de b칰squeda
user_pref("browser.urlbar.showSearchSuggestionsFirst", false);

# Habilitar Wayland
user_pref("widget.wayland.enabled", true);

# Modo oscuro
user_pref("ui.systemUsesDarkTheme", 1);
```

Para ver todas las preferencias disponibles, abre Zen y ve a `about:config`.

### Keybindings

Los atajos de teclado personalizados se configuran en `profiles.default.keyboardShortcuts`.

#### Agregar un keybinding personalizado

1. Encuentra el ID del shortcut:
   - Abre Zen y ve a `about:config`
   - Busca `zen.keyboard.shortcuts.version` para ver la versi칩n
   - O revisa `~/.zen/default/zen-keyboard-shortcuts.json` despu칠s de ejecutar Zen
2. Agrega una entrada en `keyboardShortcuts`:

```nix
profiles.default = {
  keyboardShortcuts = [
    {
      id = "cmd_shortcutName";  # ID del shortcut en Zen
      key = "t";                 # Car치cter de la tecla (opcional)
      keycode = "VK_W";          # C칩digo de tecla virtual (opcional)
      modifiers = {
        accel = true;    # Ctrl (Linux/Windows) o Cmd (macOS)
        control = true;  # Ctrl expl칤cito
        alt = true;      # Alt
        shift = true;    # Shift
        meta = true;     # Meta/Windows/Command
      };
      disabled = false;  # true para deshabilitar el shortcut
    }
  ];
};
```

**IDs comunes de shortcuts en Zen:**
- `cmd_newTab`: Nueva pesta침a
- `cmd_closeTab`: Cerrar pesta침a
- `cmd_undoCloseTab`: Reabrir pesta침a cerrada
- `cmd_newWindow`: Nueva ventana
- `cmd_toggleSidebar`: Mostrar/ocultar sidebar
- `cmd_goBack`: Ir atr치s
- `cmd_goForward`: Ir adelante
- `cmd_reload`: Recargar p치gina
- `cmd_find`: Buscar en p치gina

Para encontrar m치s IDs, ejecuta Zen y revisa:
```
~/.zen/default/zen-keyboard-shortcuts.json
```

### Otras opciones disponibles

#### Spaces/Workspaces

Configuraci칩n de espacios de trabajo:

```nix
profiles.default = {
  spaces = {
    work = {
      id = "uuid-aqui";  # Genera un UUID v4
      name = "Work";
      position = 0;
      icon = "游눺";
    };
  };
};
```

#### Pins

Pesta침as fijadas:

```nix
profiles.default = {
  pins = {
    gmail = {
      id = "uuid-aqui";
      title = "Gmail";
      url = "https://mail.google.com";
      position = 0;
    };
  };
};
```

#### Mods

Temas desde la tienda de Zen:

```nix
profiles.default = {
  mods = [
    "mod-uuid-1"
    "mod-uuid-2"
  ];
};
```

Encuentra mods en: https://zen-browser.github.io/theme-store/

## Aplicar cambios

Despu칠s de modificar `zen.nix`:

```bash
make switch
# o
home-manager switch
```

Luego reinicia Zen Browser para que los cambios surtan efecto.

## Navegador por defecto

Zen Browser est치 configurado como navegador por defecto v칤a:
- **XDG MIME Apps**: Configurado para abrir enlaces http/https
- **Variable de entorno**: `BROWSER=zen` (usada por Hyprland y scripts)

El archivo `.desktop` se llama `zen-twilight.desktop` (no `zen-browser.desktop`).

---

## Helium Browser

**Helium** es un navegador basado en Chromium con un enfoque fuerte en **seguridad y privacidad**. Est치 configurado con flags optimizados que reducen el tracking, fingerprinting y la recolecci칩n de datos.

### Configuraci칩n

La configuraci칩n de Helium se encuentra en:
```
modules/hm/programs/browsers/helium.nix
```

### Seguridad y Privacidad

Helium est치 configurado con m칰ltiples medidas de privacidad y seguridad:

- **Protecci칩n contra fingerprinting**: Ruido a침adido a canvas, measuretext y client-rects para dificultar la identificaci칩n 칰nica del navegador
- **Sin recolecci칩n de datos**: Deshabilitada la recolecci칩n de motores de b칰squeda y telemetr칤a
- **Manejo seguro de extensiones**: Configuraci칩n que requiere confirmaci칩n expl칤cita para instalar extensiones
- **Dominios punycode forzados**: Mejora la seguridad al mostrar dominios internacionales en formato punycode
- **Sin pings**: Deshabilitados los pings de red para evitar tracking

### Caracter칤sticas t칠cnicas

- **Basado en Chromium**: Compatible con extensiones de Chrome
- **Flags optimizados**: Utiliza los flags compartidos de `chromium-flags.nix` para rendimiento y privacidad

### Flags de Chromium

Helium utiliza los flags compartidos definidos en `chromium-flags.nix`, que incluyen:

- **Wayland support**: Soporte nativo para Wayland
- **GPU acceleration**: Aceleraci칩n por hardware para video y gr치ficos
- **Vulkan backend**: Renderizado con Vulkan
- **VAAPI**: Decodificaci칩n de video acelerada por hardware
- **Privacidad**: Flags para reducir fingerprinting y tracking

Las variables de entorno configuradas incluyen:
- `LIBVA_DRIVER_NAME=radeonsi`
- `EGL_PLATFORM=wayland`
- `AMD_VULKAN_ICD=RADV`

---

## Google Chrome

**Google Chrome** es el navegador est치ndar de Google, disponible como alternativa.

### Configuraci칩n

La configuraci칩n de Google Chrome se encuentra en:
```
modules/hm/programs/browsers/google-chrome.nix
```

### Uso

Google Chrome se instala como un paquete est치ndar sin configuraci칩n adicional por defecto. Puedes agregar variables de entorno personalizadas si lo necesitas:

```nix
home.sessionVariables = {
  GOOGLE_CHROME_EXTRA_FLAGS = "--some-flag";
};
```

---

## Flags compartidos de Chromium

El archivo `chromium-flags.nix` contiene flags optimizados para navegadores basados en Chromium. **Actualmente, estos flags se aplican a Helium** a trav칠s de variables de entorno. **Google Chrome no est치 usando estos flags por defecto**, pero puedes configurarlos si lo deseas.

### Explicaci칩n detallada de los flags

#### Wayland Support
```nix
--ozone-platform=wayland
--enable-features=WaylandWindowDecorations
```
- **`--ozone-platform=wayland`**: Usa Wayland como plataforma de ventanas (mejor rendimiento y soporte nativo en Linux)
- **`--enable-features=WaylandWindowDecorations`**: Habilita decoraciones de ventana nativas de Wayland

#### GPU y Aceleraci칩n de Video
```nix
--use-vulkan=native
--enable-dawn-backend=vulkan
--ignore-gpu-blocklist
--enable-gpu-rasterization
--enable-zero-copy
--enable-raw-draw
--enable-drdc
--disable-gpu-driver-bug-workarounds
```
- **`--use-vulkan=native`**: Usa Vulkan como API de gr치ficos (mejor rendimiento que OpenGL)
- **`--enable-dawn-backend=vulkan`**: Backend Vulkan para WebGPU
- **`--ignore-gpu-blocklist`**: Ignora la lista negra de GPUs (permite usar GPU aunque no est칠 oficialmente soportada)
- **`--enable-gpu-rasterization`**: Usa GPU para rasterizar (renderizar) p치ginas web
- **`--enable-zero-copy`**: Reduce copias de memoria innecesarias (mejor rendimiento)
- **`--enable-raw-draw`**: Renderizado directo sin capas intermedias
- **`--enable-drdc`**: Dynamic Refresh Rate Control (mejor sincronizaci칩n)
- **`--disable-gpu-driver-bug-workarounds`**: Desactiva workarounds para bugs de drivers (mejor rendimiento si tu driver es estable)

#### Features de Rendimiento
```nix
--enable-features=UseOzonePlatform,Vulkan,SkiaGraphite,VaapiVideoEncoder,VaapiVideoDecoder,CanvasOopRasterization,VaapiIgnoreDriverChecks,OverlayScrollbar,ParallelDownloading
```
- **`UseOzonePlatform`**: Plataforma de ventanas moderna
- **`Vulkan`**: Renderizado con Vulkan
- **`SkiaGraphite`**: Motor de gr치ficos mejorado
- **`VaapiVideoEncoder/VaapiVideoDecoder`**: Codificaci칩n/decodificaci칩n de video con VAAPI (aceleraci칩n por hardware)
- **`CanvasOopRasterization`**: Rasterizaci칩n fuera de proceso para canvas
- **`VaapiIgnoreDriverChecks`**: Ignora verificaciones de drivers VAAPI
- **`OverlayScrollbar`**: Barras de desplazamiento overlay (m치s espacio)
- **`ParallelDownloading`**: Descargas paralelas (m치s r치pido)

#### Aceleraci칩n de Video Espec칤fica
```nix
--enable-hardware-overlays
--enable-accelerated-video-decode
--enable-accelerated-video-encode
--enable-accelerated-mjpeg-decode
```
- **`--enable-hardware-overlays`**: Overlays de hardware (mejor rendimiento de video)
- **`--enable-accelerated-video-decode`**: Decodificaci칩n de video acelerada por hardware
- **`--enable-accelerated-video-encode`**: Codificaci칩n de video acelerada por hardware
- **`--enable-accelerated-mjpeg-decode`**: Decodificaci칩n de JPEG acelerada

#### Rendimiento General
```nix
--enable-oop-rasterization
--enable-webgl-developer-extensions
--enable-accelerated-2d-canvas
--enable-direct-composition
--enable-gpu-compositing
```
- **`--enable-oop-rasterization`**: Rasterizaci칩n fuera de proceso (mejor estabilidad)
- **`--enable-webgl-developer-extensions`**: Extensiones de desarrollo para WebGL
- **`--enable-accelerated-2d-canvas`**: Canvas 2D acelerado por GPU
- **`--enable-direct-composition`**: Composici칩n directa (mejor rendimiento)
- **`--enable-gpu-compositing`**: Composici칩n con GPU

#### Navegaci칩n Suave
```nix
--enable-media-router
--enable-smooth-scrolling
```
- **`--enable-media-router`**: Router de medios (para casting, etc.)
- **`--enable-smooth-scrolling`**: Desplazamiento suave

#### Privacidad y Seguridad (UnGoogled)
```nix
--disable-search-engine-collection
--extension-mime-request-handling=always-prompt-for-install
--fingerprinting-canvas-image-data-noise
--fingerprinting-canvas-measuretext-noise
--fingerprinting-client-rects-noise
--popups-to-tabs
--force-punycode-hostnames
--show-avatar-button=incognito-and-guest
--no-pings
```
- **`--disable-search-engine-collection`**: Desactiva recolecci칩n de motores de b칰squeda
- **`--extension-mime-request-handling=always-prompt-for-install`**: Siempre pregunta antes de instalar extensiones
- **`--fingerprinting-canvas-image-data-noise`**: A침ade ruido a canvas para prevenir fingerprinting
- **`--fingerprinting-canvas-measuretext-noise`**: A침ade ruido a measureText para prevenir fingerprinting
- **`--fingerprinting-client-rects-noise`**: A침ade ruido a getBoundingClientRect para prevenir fingerprinting
- **`--popups-to-tabs`**: Convierte popups en pesta침as (m치s seguro)
- **`--force-punycode-hostnames`**: Fuerza punycode en nombres de dominio (previene ataques de homograf칤a)
- **`--show-avatar-button=incognito-and-guest`**: Solo muestra avatar en modo inc칩gnito/guest
- **`--no-pings`**: Desactiva pings de red (previene tracking)

#### Miscel치neos
```nix
--disable-features=UseChromeOSDirectVideoDecoder
--no-default-browser-check
```
- **`--disable-features=UseChromeOSDirectVideoDecoder`**: Desactiva decodificador directo de ChromeOS (no aplicable en Linux)
- **`--no-default-browser-check`**: No verifica si es el navegador por defecto al iniciar

### Variables de Entorno

Las variables de entorno configuran el sistema para usar aceleraci칩n de hardware:

```nix
LIBVA_DRIVER_NAME = "radeonsi"           # Driver VAAPI para AMD
LIBVA_MESSAGING_LEVEL = "1"              # Nivel de mensajes de VAAPI
LIBGL_ALWAYS_SOFTWARE = "0"              # No forzar software rendering
ENABLE_VAAPI = "1"                        # Habilitar VAAPI
ENABLE_VDPAU = "1"                        # Habilitar VDPAU (otro sistema de aceleraci칩n)
VAAPI_DISABLE_ENCODER_CHECKING = "1"     # Desactivar verificaciones de encoder
EGL_PLATFORM = "wayland"                  # Usar Wayland para EGL
RADV_PERFTEST = "sam"                     # Perfil de rendimiento para RADV (AMD)
AMD_VULKAN_ICD = "RADV"                   # Usar RADV como driver Vulkan para AMD
```

### Aplicar flags a Google Chrome

Actualmente, **Google Chrome no usa estos flags**. Para aplicarlos, puedes modificar `google-chrome.nix`:

```nix
{ pkgs, ... }:
let
  chromiumFlags = import ./chromium-flags.nix { inherit pkgs; };
in {
  home.packages = [ pkgs.google-chrome ];
  
  # Aplicar variables de entorno
  home.sessionVariables = chromiumFlags.sessionVariables;
  
  # Aplicar flags (requiere wrapper personalizado)
  # Nota: Google Chrome no acepta flags directamente v칤a variable de entorno
  # Necesitar칤as crear un wrapper o usar un archivo de flags
}
```

**Nota importante**: Google Chrome no acepta flags v칤a `GOOGLE_CHROME_EXTRA_FLAGS` de la misma forma que Chromium. Para aplicar flags a Google Chrome, necesitar칤as:
1. Crear un wrapper personalizado del paquete
2. O usar un archivo de configuraci칩n de flags (si Chrome lo soporta)
3. O usar Chromium en lugar de Google Chrome (que s칤 acepta flags m치s f치cilmente)

