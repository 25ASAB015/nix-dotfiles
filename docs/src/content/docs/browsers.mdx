---
title: Browsers
description: Configuraci칩n de navegadores web, especialmente Zen Browser
---

# 游깷 Browsers

Este sistema utiliza **Zen Browser** como navegador principal. Zen Browser es un fork de Firefox con caracter칤sticas avanzadas de personalizaci칩n, pesta침as verticales y un sistema de mods.

## Zen Browser

### Configuraci칩n

La configuraci칩n de Zen Browser se encuentra en:
```
modules/hm/programs/browsers/zen.nix
```

### Extensiones

Las extensiones se configuran en la secci칩n `ExtensionSettings` dentro de `policies`. Actualmente est치n instaladas:

- **uBlock Origin** - Bloqueador de anuncios
- **1Password X** - Gestor de contrase침as

#### Agregar una nueva extensi칩n

Para agregar una extensi칩n:

1. Obt칠n el ID de la extensi칩n desde [addons.mozilla.org](https://addons.mozilla.org)
   - Puede estar en formato `"ID@author"` o `"{UUID}"`
2. Usa la URL de descarga directa del .xpi:
   ```
   https://addons.mozilla.org/firefox/downloads/latest/[extension-slug]/latest.xpi
   ```
3. Agrega una entrada en `ExtensionSettings`:

```nix
ExtensionSettings = {
  "EXTENSION_ID" = {
    install_url = "https://addons.mozilla.org/firefox/downloads/latest/extension-slug/latest.xpi";
    installation_mode = "force_installed";
  };
};
```

**Ejemplo real:**
```nix
# 1Password X - Password Manager
"{d633138d-6c8b-4493-84d1-909800a9d5b5}" = {
  install_url = "https://addons.mozilla.org/firefox/downloads/latest/1password-x-password-manager/latest.xpi";
  installation_mode = "force_installed";
};
```

### Settings/Preferencias

Los settings personalizados se configuran en la secci칩n `extraPrefs` usando sintaxis `user.js`.

#### Settings actualmente configurados

- **DRM Content**: Habilitado (`media.eme.enabled = true`)
- **Scrollbars siempre visibles**: Deshabilitado overlay scrollbars (`widget.gtk.overlay-scrollbars.enabled = false`)
- **Picture-in-Picture**: Habilitado con controles (`media.videocontrols.picture-in-picture.enabled = true`)
- **Mantener reproducci칩n en PiP**: Al cambiar pesta침as (`media.videocontrols.picture-in-picture.keep-playing-when-switching-tabs = true`)

#### Agregar un nuevo setting

Agrega l칤neas en `extraPrefs` con el formato:

```nix
extraPrefs = ''
  user_pref("preference.name", value);
'';
```

**Ejemplos comunes:**
```nix
# Cambiar p치gina de inicio
user_pref("browser.startup.homepage", "about:blank");

# Deshabilitar sugerencias de b칰squeda
user_pref("browser.urlbar.showSearchSuggestionsFirst", false);

# Habilitar Wayland
user_pref("widget.wayland.enabled", true);

# Modo oscuro
user_pref("ui.systemUsesDarkTheme", 1);
```

Para ver todas las preferencias disponibles, abre Zen y ve a `about:config`.

### Keybindings

Los atajos de teclado personalizados se configuran en `profiles.default.keyboardShortcuts`.

#### Agregar un keybinding personalizado

1. Encuentra el ID del shortcut:
   - Abre Zen y ve a `about:config`
   - Busca `zen.keyboard.shortcuts.version` para ver la versi칩n
   - O revisa `~/.zen/default/zen-keyboard-shortcuts.json` despu칠s de ejecutar Zen
2. Agrega una entrada en `keyboardShortcuts`:

```nix
profiles.default = {
  keyboardShortcuts = [
    {
      id = "cmd_shortcutName";  # ID del shortcut en Zen
      key = "t";                 # Car치cter de la tecla (opcional)
      keycode = "VK_W";          # C칩digo de tecla virtual (opcional)
      modifiers = {
        accel = true;    # Ctrl (Linux/Windows) o Cmd (macOS)
        control = true;  # Ctrl expl칤cito
        alt = true;      # Alt
        shift = true;    # Shift
        meta = true;     # Meta/Windows/Command
      };
      disabled = false;  # true para deshabilitar el shortcut
    }
  ];
};
```

**IDs comunes de shortcuts en Zen:**
- `cmd_newTab`: Nueva pesta침a
- `cmd_closeTab`: Cerrar pesta침a
- `cmd_undoCloseTab`: Reabrir pesta침a cerrada
- `cmd_newWindow`: Nueva ventana
- `cmd_toggleSidebar`: Mostrar/ocultar sidebar
- `cmd_goBack`: Ir atr치s
- `cmd_goForward`: Ir adelante
- `cmd_reload`: Recargar p치gina
- `cmd_find`: Buscar en p치gina

Para encontrar m치s IDs, ejecuta Zen y revisa:
```
~/.zen/default/zen-keyboard-shortcuts.json
```

### Otras opciones disponibles

#### Spaces/Workspaces

Configuraci칩n de espacios de trabajo:

```nix
profiles.default = {
  spaces = {
    work = {
      id = "uuid-aqui";  # Genera un UUID v4
      name = "Work";
      position = 0;
      icon = "游눺";
    };
  };
};
```

#### Pins

Pesta침as fijadas:

```nix
profiles.default = {
  pins = {
    gmail = {
      id = "uuid-aqui";
      title = "Gmail";
      url = "https://mail.google.com";
      position = 0;
    };
  };
};
```

#### Mods

Temas desde la tienda de Zen:

```nix
profiles.default = {
  mods = [
    "mod-uuid-1"
    "mod-uuid-2"
  ];
};
```

Encuentra mods en: https://zen-browser.github.io/theme-store/

## Aplicar cambios

Despu칠s de modificar `zen.nix`:

```bash
make switch
# o
home-manager switch
```

Luego reinicia Zen Browser para que los cambios surtan efecto.

## Navegador por defecto

Zen Browser est치 configurado como navegador por defecto v칤a:
- **XDG MIME Apps**: Configurado para abrir enlaces http/https
- **Variable de entorno**: `BROWSER=zen` (usada por Hyprland y scripts)

El archivo `.desktop` se llama `zen-twilight.desktop` (no `zen-browser.desktop`).

