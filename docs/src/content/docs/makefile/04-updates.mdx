---
title: Actualizaciones y Flakes
description: Comandos para actualizar inputs del flake y gestionar dependencias
---

# Actualizaciones y Flakes

Módulo: `make/updates.mk`

Comandos para actualizar inputs del flake, gestionar dependencias y ver cambios.

## Comandos Disponibles

### `make update`
Actualiza todos los inputs del flake.

```bash
make update
```

**Qué hace:** Actualiza todos los inputs en `flake.lock` (nixpkgs, hydenix, etc).

---

### `make update-nixpkgs`
Actualiza solo el input de nixpkgs.

```bash
make update-nixpkgs
```

---

### `make update-hydenix`
Actualiza solo el input de hydenix.

```bash
make update-hydenix
```

---

### `make update-input`
Actualiza un input específico del flake.

```bash
make update-input INPUT=<name>
```

**Ejemplos:**
```bash
make update-input INPUT=hydenix
make update-input INPUT=nixpkgs
make update-input INPUT=zen-browser-flake
```

---

### `make flake-diff`

Muestra diferencias inteligentes en los archivos del flake (`flake.nix` y `flake.lock`). Detecta automáticamente qué archivos han cambiado.

```bash
make flake-diff
```

**Información mostrada:**
- Cambios en la configuración (`flake.nix`)
- Cambios en los inputs/versiones (`flake.lock`)
- Advertencias si no hay cambios pendientes

---

### `make upgrade`

Flujo de trabajo completo recomendado: actualizar, revisar y aplicar.

```bash
make upgrade
```

**Qué hace:**
1. `make update` (Actualiza todos los inputs)
2. `make flake-diff` (Muestra los cambios para revisión)
3. `make switch` (Aplica los cambios al sistema)

---

### `make show`

Muestra los outputs definidos en el flake.

```bash
make show
```

---

### `make flake-check`

Verifica la sintaxis del flake sin construir nada.

```bash
make flake-check
```

---

## Workflow Recomendado

### Update Seguro
```bash
# 1. Actualizar inputs
make update

# 2. Ver qué cambió de forma inteligente
make flake-diff

# 3. Validar configuración
make validate

# 4. Probar temporalmente
make test

# 5. Si funciona, aplicar permanentemente
make switch
```

### Update Rápido (todo-en-uno)
```bash
make upgrade  # update + flake-diff + switch
```

### Update Selectivo
```bash
# Solo actualizar un input específico
make update-input INPUT=hydenix
make flake-diff
make test
make switch
```

