---
title: Generaciones y Rollback
description: Comandos para gestionar generaciones del sistema y hacer rollback
---

# Generaciones y Rollback

Módulo: `make/generations.mk`

Comandos para listar, comparar y revertir generaciones del sistema.

## Comandos Disponibles

### `make gen-list`
Lista todas las generaciones del sistema.

```bash
make gen-list
```

**Qué muestra:** Número de generación, fecha de creación y marca de la generación actual.

---

### `make gen-rollback`
Revierte a la generación anterior del sistema.

```bash
make gen-rollback
```

**Qué hace:** Activa la generación anterior inmediatamente. Requiere confirmación `yes`.

**Cuándo usarlo:** Cuando una aplicación de configuración (`sys-apply`) resulta en un sistema inestable.

---

### `make gen-diff`
Compara dos generaciones específicas.

```bash
make gen-diff GEN1=<n> GEN2=<m>
```

**Ejemplos:**
```bash
make gen-diff GEN1=184 GEN2=186
```

---

### `make gen-diff-current`
Compara la generación actual con la inmediatamente anterior.

```bash
make gen-diff-current
```

**Qué muestra:** Diferencias detalladas de paquetes y versiones entre las dos últimas generaciones.

---

### `make gen-sizes`
Muestra el tamaño en disco de cada generación almacenada.

```bash
make gen-sizes
```

**Cuándo usarlo:** Para identificar qué generaciones están consumiendo más espacio antes de ejecutar una limpieza (`sys-gc`).

---

### `make gen-current`
Muestra detalles de la generación que está activa actualmente.

```bash
make gen-current
```

---

## Workflow Recomendado

### Rollback Rápido
```bash
# Si algo se rompió después de un cambio
make gen-rollback
```

### Investigar Cambios
```bash
# Ver qué cambió en la última actualización
make gen-diff-current

# Comparar con una versión específica más antigua
make gen-list
make gen-diff GEN1=150 GEN2=186
```

> [!NOTE]
> Para ver los comandos antiguos y aliases de compatibilidad (como `make rollback`), consulta la [Guía de Aliases](../10-aliases).
