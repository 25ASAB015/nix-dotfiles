---
title: Diagn√≥stico y Logs
description: Comandos para diagn√≥stico del sistema, salud y visualizaci√≥n de logs
---

# Diagn√≥stico y Logs

M√≥dulo: `make/logs.mk`

Comandos para diagn√≥stico del sistema, health checks y visualizaci√≥n de logs.

## Cuadro Comparativo: Health vs Status

| Caracter√≠stica | `make health` (Dashboard) | `make status` (Reporte) |
| :--- | :--- | :--- |
| **Objetivo** | Verificaci√≥n r√°pida "vuelo" (pasa/falla) | Snapshot completo del sistema |
| **Velocidad** | Instant√°neo (< 1s) | Detallado (~2-5s) |
| **Uso** | Rutina, pre-commit, mantenimiento | Debugging, auditor√≠a, telemetr√≠a |
| **Contenido** | Estado cr√≠tico de componentes | M√©tricas, historial, metadatos |

## Comandos Disponibles

### `make health`
Muestra un dashboard ultra-r√°pido con el estado vital del sistema.

```bash
make health
```

**Qu√© verifica:**
- **Estructura Flake**: Validaci√≥n instant√°nea de metadatos del Flake.
- **Espacio en disco**: Uso de la partici√≥n `/nix` con alertas visuales.
- **Servicios**: Lista detallada de servicios systemd fallidos (si los hay).
- **Git Status**: Estado del repositorio (Clean/Pending).
- **Generaciones**: Conteo preciso de generaciones activas.

**Salida esperada (en caso de error):**
```
  Servicios:          ‚úó 2 fallidos (sshd, boot-services.service)
```

**Cu√°ndo usarlo:** Como primer paso r√°pido antes de cualquier cambio o despu√©s de una limpieza.

---

### `make test-network`
Ejecuta diagn√≥sticos comprehensivos de red.

```bash
make test-network
```

**Qu√© hace:**
- Prueba conectividad
- Verifica DNS
- Muestra configuraci√≥n de red
- Diagnostica problemas comunes

**Cu√°ndo usarlo:** Cuando notes lentitud o problemas de conexi√≥n.

---

### `make status`
Reporte comprehensivo del sistema (Hardware, NixOS y Flake).

```bash
make status
```

**Informaci√≥n mostrada:**
- **Base:** Hostname, Versi√≥n de NixOS, ubicaci√≥n del Flake y tama√±o del Nix Store.
- **Almacenamiento:** Uso detallado de `/nix` y resumen de generaciones.
- **Historial:** Listado de las √∫ltimas 5 generaciones del sistema.
- **Componentes:** Estado de salud del repo Git y servicios del sistema.
- **Metadata:** Versiones (timestamps) de los principales inputs del Flake.

**Salida esperada:**
```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          üìä Reporte de Estado del Sistema          
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìç Informaci√≥n de Base
  Hostname:     hydenix
  NixOS:        24.11.2026
  Flake:        /home/ludus/Dotfiles
  Store Size:   45G

üíæ Almacenamiento y Generaciones
  Disco (/nix): 45% usado (120G libre)
  Total Gens:   186
  Generaci√≥n:   186 (2026-01-19 20:00)

  √öltimas 5 generaciones:
    182   2026-01-18 15:30:00
    183   2026-01-18 18:45:00
    184   2026-01-19 10:15:00
    185   2026-01-19 16:20:00
    186   2026-01-19 20:00:00

üîÑ Estado de Componentes
  Git Repo:     ‚úì Clean
  Servicios:    ‚úì OK

üì¶ Flake Inputs (Top 5)
    1737292800
    1737292800
    ...

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ Reporte finalizado
```

**Cu√°ndo usarlo:** Cuando necesites un diagn√≥stico profundo o detalles espec√≠ficos de la configuraci√≥n activa.

---

### `make watch-logs`
Observa logs del sistema en tiempo real (follow mode).

```bash
make watch-logs
```

**Qu√© hace:** `journalctl -f` para ver logs en vivo.

---

### `make logs-boot`
Muestra logs del √∫ltimo arranque.

```bash
make logs-boot
```

**Cu√°ndo usarlo:** Diagnosticar problemas de arranque.

---

### `make logs-errors`
Muestra logs de errores recientes.

```bash
make logs-errors
```

**Cu√°ndo usarlo:** Investigar errores del sistema.

---

### `make logs-service`
Muestra logs de un servicio espec√≠fico.

```bash
make logs-service SVC=<service>
```

**Ejemplos:**
```bash
make logs-service SVC=sshd
make logs-service SVC=docker
make logs-service SVC=networkmanager
```

---

## Workflow Recomendado

### Diagn√≥stico General
```bash
make health        # Dashboard r√°pido de salud
make status        # Reporte completo del sistema
```

### Problemas de Red
```bash
make test-network  # Diagn√≥stico completo de red
```

### Investigar Errores
```bash
make logs-errors   # Ver errores recientes
make logs-boot     # Ver logs de arranque
make watch-logs    # Observar en tiempo real
```

### Debugging de Servicios
```bash
# Ver logs de un servicio espec√≠fico
make logs-service SVC=sshd
make logs-service SVC=networkmanager
```
