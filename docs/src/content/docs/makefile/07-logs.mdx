---
title: DiagnÃ³stico y Logs
description: Comandos para diagnÃ³stico del sistema, salud y visualizaciÃ³n de logs
---

# DiagnÃ³stico y Logs

MÃ³dulo: `make/logs.mk`

Comandos para diagnÃ³stico del sistema, health checks y visualizaciÃ³n de logs.

## Comandos Disponibles

### `make health`
Muestra un dashboard rÃ¡pido con el estado de salud del sistema.

```bash
make health
```

**QuÃ© verifica:**
- Sintaxis y evaluaciÃ³n del Flake
- Espacio en disco en `/nix` (con alertas de color)
- Servicios fallidos de systemd
- Estado del repositorio Git
- Contador de generaciones de NixOS

**CuÃ¡ndo usarlo:** Como primer paso rÃ¡pido para verificar que todo estÃ© en orden.

---

### `make test-network`
Ejecuta diagnÃ³sticos comprehensivos de red.

```bash
make test-network
```

**QuÃ© hace:**
- Prueba conectividad
- Verifica DNS
- Muestra configuraciÃ³n de red
- Diagnostica problemas comunes

**CuÃ¡ndo usarlo:** Cuando notes lentitud o problemas de conexiÃ³n.

---

### `make status`
Reporte comprehensivo del sistema (Hardware, NixOS y Flake).

```bash
make status
```

**InformaciÃ³n mostrada:**
- **Base:** Hostname, VersiÃ³n de NixOS, ubicaciÃ³n del Flake y tamaÃ±o del Nix Store.
- **Almacenamiento:** Uso detallado de `/nix` y resumen de generaciones.
- **Historial:** Listado de las Ãºltimas 5 generaciones del sistema.
- **Componentes:** Estado de salud del repo Git y servicios del sistema.
- **Metadata:** Versiones (timestamps) de los principales inputs del Flake.

**Salida esperada:**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ğŸ“Š Reporte de Estado del Sistema          
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ InformaciÃ³n de Base
  Hostname:     hydenix
  NixOS:        24.11.2026
  Flake:        /home/ludus/Dotfiles
  Store Size:   45G

ğŸ’¾ Almacenamiento y Generaciones
  Disco (/nix): 45% usado (120G libre)
  Total Gens:   186
  GeneraciÃ³n:   186 (2026-01-19 20:00)

  Ãšltimas 5 generaciones:
    182   2026-01-18 15:30:00
    183   2026-01-18 18:45:00
    184   2026-01-19 10:15:00
    185   2026-01-19 16:20:00
    186   2026-01-19 20:00:00

ğŸ”„ Estado de Componentes
  Git Repo:     âœ“ Clean
  Servicios:    âœ“ OK

ğŸ“¦ Flake Inputs (Top 5)
    1737292800
    1737292800
    ...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Reporte finalizado
```

**CuÃ¡ndo usarlo:** Cuando necesites un diagnÃ³stico profundo o detalles especÃ­ficos de la configuraciÃ³n activa.

---

### `make watch-logs`
Observa logs del sistema en tiempo real (follow mode).

```bash
make watch-logs
```

**QuÃ© hace:** `journalctl -f` para ver logs en vivo.

---

### `make logs-boot`
Muestra logs del Ãºltimo arranque.

```bash
make logs-boot
```

**CuÃ¡ndo usarlo:** Diagnosticar problemas de arranque.

---

### `make logs-errors`
Muestra logs de errores recientes.

```bash
make logs-errors
```

**CuÃ¡ndo usarlo:** Investigar errores del sistema.

---

### `make logs-service`
Muestra logs de un servicio especÃ­fico.

```bash
make logs-service SVC=<service>
```

**Ejemplos:**
```bash
make logs-service SVC=sshd
make logs-service SVC=docker
make logs-service SVC=networkmanager
```

---

## Workflow Recomendado

### DiagnÃ³stico General
```bash
make health        # Dashboard rÃ¡pido de salud
make status        # Reporte completo del sistema
```

### Problemas de Red
```bash
make test-network  # DiagnÃ³stico completo de red
```

### Investigar Errores
```bash
make logs-errors   # Ver errores recientes
make logs-boot     # Ver logs de arranque
make watch-logs    # Observar en tiempo real
```

### Debugging de Servicios
```bash
# Ver logs de un servicio especÃ­fico
make logs-service SVC=sshd
make logs-service SVC=networkmanager
```
