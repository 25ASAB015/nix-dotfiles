---
title: Diagn贸stico y Logs
description: Comandos para diagn贸stico del sistema, salud y visualizaci贸n de logs
---

# Diagn贸stico y Logs

M贸dulo: `make/logs.mk`

Comandos para diagn贸stico del sistema, reportes de estado y visualizaci贸n de logs.

## Comandos Disponibles

### `make sys-status`
Dashboard y reporte comprehensivo de salud del sistema. Este comando fusiona el anterior `health` con un reporte detallado.

```bash
make sys-status
```

**Informaci贸n mostrada:**
- ** Dashboard de Salud (Vuelo):** Verificaci贸n instant谩nea de estructura Flake, espacio en `/nix`, servicios fallidos, estado de Git y conteo de generaciones.
- ** Informaci贸n de Base:** Hostname, Versi贸n de NixOS, ubicaci贸n del Flake y tama帽o del Nix Store.
- ** Almacenamiento y Generaciones:** Uso detallado de `/nix` y resumen de las 煤ltimas 5 generaciones del sistema.

**Cu谩ndo usarlo:** Como primer paso de rutina o cuando necesites un diagn贸stico profundo del estado actual de tu sistema.

---

### `make log-net`
Ejecuta diagn贸sticos comprehensivos de red.

```bash
make log-net
```

**Qu茅 hace:**
- Prueba conectividad y latencia (ping)
- Verifica DNS (NM y resolvectl)
- Mide throughput con Cloudflare
- Ejecuta speedtest y mtr para calidad de ruta

**Cu谩ndo usarlo:** Cuando notes lentitud o problemas de conexi贸n.

---

### `make log-net-enhanced`
Ejecuta diagn贸sticos de red mejorados con verificaci贸n autom谩tica.

```bash
make log-net-enhanced
```

**Qu茅 hace:**
- Versi贸n mejorada de `log-net`
- Verifica configuraci贸n DNS (systemd-resolved y NetworkManager)
- Detecta si el ISP est谩 interceptando DNS
- Comprueba reglas de firewall
- Mide rendimiento de consultas DNS
- Estad铆sticas detalladas de interfaces y optimizaciones TCP (BBR)

**Cu谩ndo usarlo:** Herramienta recomendada para diagn贸stico avanzado de problemas de red y DNS.

---

### `make log-watch`
Observa logs del sistema en tiempo real (follow mode).

```bash
make log-watch
```

**Qu茅 hace:** Acceso directo a `journalctl -f` para monitoreo en vivo.

---

### `make log-boot`
Muestra logs del arranque actual centrado en errores.

```bash
make log-boot
```

**Cu谩ndo usarlo:** Investigar por qu茅 un componente fall贸 al iniciar el sistema.

---

### `make log-err`
Muestra los 煤ltimos 50 logs de error del sistema.

```bash
make log-err
```

**Cu谩ndo usarlo:** Diagn贸stico r谩pido de fallos recientes sin navegar por todo el journal.

---

### `make log-svc`
Muestra logs de un servicio espec铆fico con filtrado inteligente (煤ltima hora, hoy, o hist贸rico).

```bash
make log-svc SVC=<service>
```

**Ejemplos:**
```bash
make log-svc SVC=sshd
make log-svc SVC=docker
make log-svc SVC=networkmanager
```

---

## Workflow Recomendado

### Diagn贸stico General
```bash
make sys-status      # Dashboard y reporte completo
```

### Problemas de Red
```bash
make log-net         # Diagn贸stico completo de red
```

### Investigar Errores
```bash
make log-err         # Ver errores recientes
make log-boot        # Ver logs de arranque
make log-watch       # Observar en tiempo real
```

### Debugging de Servicios
```bash
# Ver logs de un servicio espec铆fico
make log-svc SVC=sshd
make log-svc SVC=networkmanager
```

> [!NOTE]
> Para ver los comandos antiguos y aliases de compatibilidad (como `health` o `watch-logs`), consulta la [Gu铆a de Aliases](../10-aliases).
