---
title: GestiÃ³n del Sistema
description: Comandos para compilar, aplicar y validar configuraciones de NixOS
---

# GestiÃ³n del Sistema

MÃ³dulo: `make/system.mk`

Comandos para compilar, probar, aplicar y validar configuraciones de NixOS. Estos son los comandos fundamentales para el mantenimiento del sistema.

## Resumen de Comandos (Prefijo `sys-`)

| Comando | DescripciÃ³n | Acceso RÃ¡pido |
| :--- | :--- | :--- |
| **`make sys-apply`** | Aplicar configuraciÃ³n (Rebuild + Switch) | `make switch` |
| **`make sys-deploy`** | Add + Commit + Push + Apply | `make sync` |
| **`make sys-check`** | Validar sintaxis y flake | `make validate` |
| **`make sys-status`** | Dashboard de salud del sistema | `make health` |

> [!TIP]
> Para ver la lista completa de comandos antiguos y su equivalencia, consulta la [GuÃ­a de Aliases](../10-aliases).

---

## Comandos Principales

### `make sys-apply`
**â­ Comando mÃ¡s usado** - Compila y activa tu nueva configuraciÃ³n.

```bash
make sys-apply
```

**QuÃ© hace:**
1. Git-fix (opcional) de permisos en el repositorio
2. `git add .` - Staging de todos los cambios
3. Compila la configuraciÃ³n del Flake
4. Activa la nueva configuraciÃ³n inmediatamente

---

### `make sys-deploy`
**ðŸš€ SincronizaciÃ³n Total** - Realiza el flujo completo de respaldo y aplicaciÃ³n.

```bash
make sys-deploy
```

**QuÃ© hace:**
1. Git-fix: Corrige permisos en el repositorio
2. **Validate:** Verifica sintaxis y evalua configuraciÃ³n (linter suave)
3. `make git-add` - Prepara todos los cambios
4. `make git-commit` - Crea respaldo con timestamp (salta si no hay cambios)
5. `make git-push` - Sube cambios al repositorio remoto
6. **`make sys-apply`** - Aplica la configuraciÃ³n localmente

**PropÃ³sito:** Asegurar que tu configuraciÃ³n estÃ© respaldada en la nube y aplicada localmente en un solo paso.

---

### `make sys-apply-safe`
Valida la configuraciÃ³n y luego aplica los cambios solo si no hay errores.

```bash
make sys-apply-safe
```

**QuÃ© hace:** Ejecuta `make sys-check` y, si es exitoso, procede con `make sys-apply`.

---

### `make sys-apply-fast`
Aplica cambios omitiendo algunas verificaciones internas de NixOS para mayor velocidad.

```bash
make sys-apply-fast
```

---

### `make sys-test`
Prueba tu configuraciÃ³n compilÃ¡ndola y activÃ¡ndola temporalmente. Los cambios se perderÃ¡n en el prÃ³ximo reinicio y no se crea una generaciÃ³n de arranque.

```bash
make sys-test
```

---

### `make sys-build`
Compila la configuraciÃ³n sin aplicar cambios reales. Ãštil para verificar errores antes de un switch.

```bash
make sys-build
```

---

### `make sys-check`
Realiza validaciones profundas (sintaxis, evaluaciÃ³n y linting).

```bash
make sys-check
```

---

### `make sys-status`
**ðŸ¥ Dashboard de Salud** - Muestra un resumen del estado del sistema, espacio en disco, servicios fallidos y estado de Git.

```bash
make sys-status
```

---

### `make sys-doctor`
DiagnÃ³stico y reparaciÃ³n automÃ¡tica de permisos en directorios de configuraciÃ³n y el repositorio.

```bash
make sys-doctor
```

---

## ComparaciÃ³n de Operaciones

| Comando | Compila | Activa | Persiste | GeneraciÃ³n |
|---------|---------|--------|----------|------------|
| `make sys-build` | âœ… | âŒ | N/A | âŒ |
| `make sys-test` | âœ… | âœ… | Solo sesiÃ³n | âŒ |
| `make sys-apply` | âœ… | âœ… | Permanente | âœ… |
| `make sys-boot` | âœ… | âŒ | PrÃ³ximo boot | âœ… |

> [!TIP]
> **Workflow recomendado para cambios seguros:**
> `make sys-check` â†’ `make sys-test` â†’ `make sys-apply`
