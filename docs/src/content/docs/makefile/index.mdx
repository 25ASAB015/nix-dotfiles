---
title: Makefile - DocumentaciÃ³n Modular
description: GuÃ­a completa del Makefile modular de Hydenix organizada por categorÃ­as
---

# Makefile: DocumentaciÃ³n Modular

El Makefile de Hydenix centraliza todos los comandos para construir, validar, actualizar, mantener y depurar la configuraciÃ³n de NixOS. Esta documentaciÃ³n estÃ¡ organizada en mÃ³dulos que coinciden con la estructura del cÃ³digo en `make/*.mk`.

## ğŸš€ Inicio RÃ¡pido

```bash
make help            # Lista todos los comandos disponibles
make help-examples   # Ejemplos de uso con parÃ¡metros
make test            # Prueba sin aplicar permanentemente
make switch          # Aplica cambios
make rollback        # Revierte a la generaciÃ³n anterior
```

## ğŸ“‚ Estructura Modular

El Makefile estÃ¡ organizado en 9 mÃ³dulos que coinciden con las categorÃ­as de comandos:

```
make/
â”œâ”€â”€ docs.mk          # Ayuda y DocumentaciÃ³n
â”œâ”€â”€ system.mk        # GestiÃ³n del Sistema
â”œâ”€â”€ cleanup.mk       # Limpieza y OptimizaciÃ³n
â”œâ”€â”€ updates.mk       # Actualizaciones y Flakes
â”œâ”€â”€ generations.mk   # Generaciones y Rollback
â”œâ”€â”€ git.mk           # Git y Respaldo
â”œâ”€â”€ logs.mk          # DiagnÃ³stico y Logs
â”œâ”€â”€ dev.mk           # AnÃ¡lisis y Desarrollo
â””â”€â”€ format.mk        # Formato, Linting y Estructura
```

## ğŸ“š MÃ³dulos de DocumentaciÃ³n

### [Ayuda y DocumentaciÃ³n](./01-docs)
Comandos para obtener ayuda, ver ejemplos y gestionar la documentaciÃ³n web.
- `help`, `help-examples`, `docs-local`, `docs-dev`, `docs-build`, `docs-install`, `docs-clean`

### [GestiÃ³n del Sistema](./02-system)
Comandos para compilar, aplicar y validar configuraciones de NixOS.
- `switch`, `safe-switch`, `test`, `build`, `dry-run`, `boot`, `validate`, `debug`, `quick`, `emergency`, `fix-permissions`, `fix-git-permissions`, `hardware-scan`

### [Limpieza y OptimizaciÃ³n](./03-cleanup)
Comandos para limpiar generaciones antiguas y optimizar el sistema.
- `clean`, `clean-week`, `clean-conservative`, `deep-clean`, `optimize`, `clean-result`, `fix-store`

### [Actualizaciones y Flakes](./04-updates)
Comandos para actualizar inputs del flake y gestionar dependencias.
- `update`, `update-nixpkgs`, `update-hydenix`, `update-input`, `diff-update`, `upgrade`, `show`, `flake-check`, `diff-flake`

### [Generaciones y Rollback](./05-generations)
Comandos para gestionar generaciones del sistema y hacer rollback.
- `list-generations`, `rollback`, `diff-generations`, `diff-gen`, `generation-sizes`, `current-generation`

### [Git y Respaldo](./06-git)
Comandos para gestionar el repositorio git y hacer respaldos.
- `git-add`, `git-commit`, `git-push`, `git-status`, `git-diff`, `save`, `git-log`

### [DiagnÃ³stico y Logs](./07-logs)
Comandos para diagnÃ³stico del sistema, salud y visualizaciÃ³n de logs.
- `health`, `test-network`, `info`, `status`, `watch-logs`, `logs-boot`, `logs-errors`, `logs-service`

### [AnÃ¡lisis y Desarrollo](./08-dev)
Comandos para bÃºsqueda de paquetes, anÃ¡lisis y desarrollo.
- `list-hosts`, `hosts-info`, `search`, `search-installed`, `repl`, `shell`, `vm`, `closure-size`

### [Formato y Linting](./09-format)
Comandos para formatear y validar cÃ³digo Nix.
- `format`, `lint`, `tree`

### [Pruebas y ValidaciÃ³n](./12-testing)
GuÃ­a completa de pruebas para validar el Makefile modular.
- Comandos de validaciÃ³n no destructivos
- Ejemplos de salida esperada
- Checklist de aceptaciÃ³n



## ğŸ”„ Workflows Recomendados

### Desarrollo Diario
```bash
make test â†’ make switch â†’ make rollback (si es necesario)
```

### Updates Seguros
```bash
make update â†’ make diff-update â†’ make validate â†’ make test â†’ make switch
```

### Mantenimiento
```bash
make health â†’ make clean â†’ make optimize â†’ make generation-sizes
```

### Multi-host
```bash
make list-hosts â†’ make switch HOSTNAME=laptop
```

## ğŸ’¡ Sistema de Ayuda

El Makefile tiene un sistema de ayuda en tres niveles:

1. **`make help`** - Lista completa de comandos con descripciones
2. **`make help-examples`** - Ejemplos de uso para comandos con parÃ¡metros
3. **Esta documentaciÃ³n** - GuÃ­a completa con explicaciones detalladas

## ğŸ¯ FilosofÃ­a

- **Comandos cortos y memorables** - Evita comandos largos de NixOS
- **DocumentaciÃ³n integrada** - Cada comando tiene descripciÃ³n en `make help`
- **Workflows documentados** - Secuencias de comandos para tareas comunes
- **Estructura modular** - CÃ³digo y documentaciÃ³n organizados por categorÃ­as

## ğŸ“– NavegaciÃ³n

Usa el menÃº lateral para explorar cada mÃ³dulo en detalle. Cada secciÃ³n contiene:
- DescripciÃ³n de cada comando
- Ejemplos de uso
- Casos de uso reales
- Notas importantes y advertencias
