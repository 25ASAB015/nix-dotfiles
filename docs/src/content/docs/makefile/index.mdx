---
title: Makefile - Documentaci√≥n Modular
description: Gu√≠a completa del Makefile modular de Hydenix organizada por categor√≠as
---

import { Card, CardGrid, LinkCard, Aside, Badge, Steps, Tabs, TabItem } from '@astrojs/starlight/components';

# Makefile: Documentaci√≥n Modular

El Makefile de Hydenix centraliza todos los comandos para construir, validar, actualizar, mantener y depurar la configuraci√≥n de NixOS. Esta documentaci√≥n est√° organizada en m√≥dulos que coinciden con la estructura del c√≥digo en `make/*.mk`.

<Aside type="tip" title="Inicio R√°pido">
Si es tu primera vez, comienza con estos comandos esenciales:
```bash
make help            # Lista todos los comandos disponibles
make help-examples   # Ejemplos de uso con par√°metros
make test            # Prueba sin aplicar permanentemente
make switch          # Aplica cambios
```
</Aside>

## üìÇ Estructura Modular

El Makefile est√° organizado en **9 m√≥dulos activos** que coinciden con las categor√≠as de comandos:

<CardGrid>
  <Card title="üìö docs.mk" icon="document">
    Ayuda y Documentaci√≥n
  </Card>
  <Card title="üîß system.mk" icon="setting">
    Gesti√≥n del Sistema
  </Card>
  <Card title="üßπ cleanup.mk" icon="approve-check">
    Limpieza y Optimizaci√≥n
  </Card>
  <Card title="üì¶ updates.mk" icon="rocket">
    Actualizaciones y Flakes
  </Card>
  <Card title="üíæ generations.mk" icon="list-format">
    Generaciones y Rollback
  </Card>
  <Card title="üîÑ git.mk" icon="github">
    Git y Respaldo
  </Card>
  <Card title="üìã logs.mk" icon="information">
    Diagn√≥stico y Logs
  </Card>
  <Card title="üîç dev.mk" icon="magnifier">
    An√°lisis y Desarrollo
  </Card>
  <Card title="‚ú® format.mk" icon="star">
    Formato y Linting
  </Card>
</CardGrid>

## üìö M√≥dulos de Documentaci√≥n

<LinkCard
  title="Ayuda y Documentaci√≥n"
  description="Comandos para obtener ayuda, ver ejemplos y gestionar la documentaci√≥n web"
  href="./01-docs"
/>

<LinkCard
  title="Gesti√≥n del Sistema"
  description="Comandos para compilar, aplicar y validar configuraciones de NixOS"
  href="./02-system"
/>

<LinkCard
  title="Limpieza y Optimizaci√≥n"
  description="Comandos para limpiar generaciones antiguas y optimizar el sistema"
  href="./03-cleanup"
/>

<LinkCard
  title="Actualizaciones y Flakes"
  description="Comandos para actualizar inputs del flake y gestionar dependencias"
  href="./04-updates"
/>

<LinkCard
  title="Generaciones y Rollback"
  description="Comandos para gestionar generaciones del sistema y hacer rollback"
  href="./05-generations"
/>

<LinkCard
  title="Git y Respaldo"
  description="Comandos para gestionar el repositorio git y hacer respaldos"
  href="./06-git"
/>

<LinkCard
  title="Diagn√≥stico y Logs"
  description="Comandos para diagn√≥stico del sistema, salud y visualizaci√≥n de logs"
  href="./07-logs"
/>

<LinkCard
  title="An√°lisis y Desarrollo"
  description="Comandos para b√∫squeda de paquetes, an√°lisis y desarrollo"
  href="./08-dev"
/>

<LinkCard
  title="Formato y Linting"
  description="Comandos para formatear y validar c√≥digo Nix"
  href="./09-format"
/>

<LinkCard
  title="Pruebas y Validaci√≥n"
  description="Gu√≠a completa de pruebas para validar el Makefile modular"
  href="./10-testing"
/>

## üîÑ Workflows Recomendados

<Tabs>
  <TabItem label="Flujo Pro">
    <Steps>
    1. **Formatear** archivos Nix
       ```bash
       make format
       ```
    
    2. **Validar** sintaxis y evaluaci√≥n
       ```bash
       make validate
       ```
    
    3. **Aplicar configuraci√≥n** permanentemente
       ```bash
       make switch
       ```
    </Steps>
  </TabItem>

  <TabItem label="Flujo Recuperaci√≥n">
    <Steps>
    1. **Listar** generaciones disponibles
       ```bash
       make list-generations
       ```

    2. **Revertir** a la generaci√≥n anterior
       ```bash
       make rollback
       ```
    </Steps>
  </TabItem>

  <TabItem label="Updates Seguros">
    <Steps>
    1. **Actualizar** inputs del flake
       ```bash
       make update
       ```
    
    2. **Ver cambios** en archivos del flake
       ```bash
       make flake-diff
       ```
    
    3. **Validar** configuraci√≥n
       ```bash
       make validate
       ```
    
    4. **Aplicar** cambios de forma segura
       ```bash
       make switch-safe
       ```
    </Steps>
  </TabItem>

  <TabItem label="Mantenimiento">
    <Steps>
    1. **Verificar salud** del sistema
       ```bash
       make health
       ```
    
    2. **Limpiar** generaciones antiguas
       ```bash
       make clean
       ```
    
    3. **Optimizar** nix store
       ```bash
       make optimize
       ```
    
    4. **Revisar** tama√±os de generaciones
       ```bash
       make generation-sizes
       ```
    </Steps>
  </TabItem>

  <TabItem label="Multi-host">
    <Steps>
    1. **Listar** hosts disponibles
       ```bash
       make list-hosts
       ```
    
    2. **Aplicar** configuraci√≥n a un host espec√≠fico
       ```bash
       make switch HOSTNAME=laptop
       ```
    </Steps>
  </TabItem>
</Tabs>

## üí° Sistema de Ayuda

<CardGrid stagger>
  <Card title="make help" icon="open-book">
    Lista completa de comandos con descripciones organizadas por categor√≠as
  </Card>
  <Card title="make help-examples" icon="document">
    Ejemplos de uso para comandos que requieren par√°metros
  </Card>
  <Card title="Esta documentaci√≥n" icon="star">
    Gu√≠a completa con explicaciones detalladas, casos de uso y mejores pr√°cticas
  </Card>
</CardGrid>

## üéØ Filosof√≠a

<Aside type="note">
El Makefile de Hydenix est√° dise√±ado con estos principios en mente:
</Aside>

- **Comandos cortos y memorables** - Evita comandos largos de NixOS
- **Documentaci√≥n integrada** - Cada comando tiene descripci√≥n en `make help`
- **Workflows documentados** - Secuencias de comandos para tareas comunes
- **Estructura modular** - C√≥digo y documentaci√≥n organizados por categor√≠as

## üìñ Navegaci√≥n

Usa el men√∫ lateral para explorar cada m√≥dulo en detalle. Cada secci√≥n contiene:

- ‚úÖ Descripci√≥n de cada comando
- ‚úÖ Ejemplos de uso
- ‚úÖ Casos de uso reales
- ‚úÖ Notas importantes y advertencias

<Aside type="caution" title="Importante">
Algunos comandos son destructivos y pueden eliminar datos. Lee la documentaci√≥n cuidadosamente antes de ejecutar comandos de limpieza o actualizaci√≥n.
</Aside>
